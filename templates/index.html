<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Chatly - AI Chatbox</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}?v=20260129" />
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='image/logo.png') }}" />
</head>

<body>

<!-- AUTH MODAL -->
<div id="auth-modal" class="auth-modal active">
  <div class="auth-container">
    <div class="auth-header">
      <img src="{{ url_for('static', filename='image/logo.png') }}" class="auth-logo" />
      <h2>Welcome to Chatly</h2>
    </div>

    <div class="auth-content">

      <!-- LOGIN -->
      <form id="login-form" class="auth-form active" autocomplete="off" novalidate>
        <h3>Sign In</h3>

        <input id="login-email" type="email" class="auth-input" placeholder="Email" required autocomplete="off" autocapitalize="none" spellcheck="false" />

        <div class="input-container">
          <input id="login-password" type="password" class="auth-input" placeholder="Password" required autocomplete="new-password" autocapitalize="none" spellcheck="false" />
          <button type="button" class="password-toggle" onclick="togglePassword('login-password')">ğŸ‘</button>
        </div>

        <button id="login-btn" class="btn-primary" type="submit">Sign In</button>

        <p class="auth-toggle">
          No account?
          <a href="#" onclick="event.preventDefault(); showSignupForm();">Create one</a>
        </p>

        <div id="login-error" class="auth-error"></div>
      </form>

      <!-- SIGNUP -->
      <div id="signup-form" class="auth-form" autocomplete="off" novalidate>
        <h3>Create Account</h3>

        <input id="signup-name" class="auth-input" placeholder="Full Name" required autocomplete="off" autocapitalize="none" spellcheck="false" />
        <input id="signup-email" class="auth-input" type="email" placeholder="Email" required autocomplete="off" autocapitalize="none" spellcheck="false" />

        <div class="input-container">
          <input id="signup-password" type="password" class="auth-input" placeholder="Password" required autocomplete="new-password" autocapitalize="none" spellcheck="false" />
          <button type="button" class="password-toggle" onclick="togglePassword('signup-password')">ğŸ‘</button>
        </div>

        <div class="input-container">
          <input id="signup-confirm-password" type="password" class="auth-input" placeholder="Confirm Password" required autocomplete="new-password" autocapitalize="none" spellcheck="false" />
          <button type="button" class="password-toggle" onclick="togglePassword('signup-confirm-password')">ğŸ‘</button>
        </div>

        <!-- PASSWORD RULES -->
        <div class="password-requirements">
          <p>Password must have:</p>
          <div id="req-length" class="requirement-item">âœ” 8 characters</div>
          <div id="req-uppercase" class="requirement-item">âœ” Uppercase</div>
          <div id="req-lowercase" class="requirement-item">âœ” Lowercase</div>
          <div id="req-number" class="requirement-item">âœ” Number</div>
        </div>

        <button id="signup-btn" class="btn-primary">Create Account</button>

        <p class="auth-toggle">
          Already have an account?
          <a href="#" onclick="event.preventDefault(); showLoginForm();">Sign In</a>
        </p>

        <div id="signup-error" class="auth-error"></div>
      </div>

    </div>
  </div>
</div>

<!-- APP (hidden behind auth) -->
<div class="app">
  <!-- App Header -->
  <div class="app-header home-click" id="home-button">
    <div class="logo">
      <img src="{{ url_for('static', filename='image/logo.png') }}" class="logo-img" alt="Chatly" />
    </div>
    <div class="app-title">CHATLY</div>
    <div class="app-subtitle">Instant help, Every time.</div>
  </div>

  <!-- Main Layout -->
  <div class="layout">
    <!-- Sidebar (flat background) with inner menu card -->
    <aside class="sidebar">
      <div class="menu-card">
        <div class="sidebar-header">
          <div class="sidebar-title">Menu</div>
        </div>
        <ul class="nav-list">
          <li class="nav-item active" data-target="screen-healthcare">Your Chat</li>
          <li class="nav-item" data-target="screen-history">Chat History</li>
        </ul>
        <div class="user-account">
          <div id="sidebar-user-email" class="user-email">Signed in securely</div>
          <button id="sidebar-logout" class="logout-link" type="button">Log out</button>
        </div>
      </div>
    </aside>

    <!-- Screens -->
    <main>
      <!-- Home -->
      <section id="screen-home" class="screen active">
        <div class="home-content">
          <div class="home-circles">
            <div class="circle-group">
              <div class="topic-circle selected">
                <img src="{{ url_for('static', filename='image/logo.png') }}" class="topic-icon" alt="Topic" />
              </div>
              <div class="topic-label">Welcome</div>
            </div>
          </div>
          <div class="home-tagline">Get started by opening a chat</div>
          <div class="home-help-text">Upload a document and ask questions</div>
          <button id="btn-start-chat" class="btn-primary">Start Chat</button>
        </div>
      </section>

      <!-- Healthcare Chat / Your Chat -->
      <section id="screen-healthcare" class="screen">
        <div class="panel">
          <div class="panel-header">Chat with Chatly <small>Ask using your uploaded docs</small></div>
          <div id="healthcare-messages" class="chat-body"></div>
          <form class="chat-input-row" data-chat="healthcare">
            <button type="button" class="upload-btn" aria-label="Upload">+</button>
            <input type="file" id="file-healthcare" accept=".pdf,.doc,.docx,.txt" style="display:none" />
            <input type="text" placeholder="What can I help you with?" autocomplete="off" autocapitalize="none" spellcheck="false" />
            <button type="submit">â–¶</button>
          </form>
        </div>
      </section>


      <!-- History -->
      <section id="screen-history" class="screen">
        <div class="panel">
          <div class="panel-header history-header">
            <span>Chat History</span>
            <div class="history-actions">
              <button id="history-clear" class="icon-btn" title="Delete all">
                ğŸ—‘
              </button>
            </div>
          </div>
          <div class="history-list">
            <div class="history-empty">No history yet.</div>
          </div>
        </div>
      </section>

      
    </main>
  </div>
</div>

<!-- SCRIPTS -->
<script type="module" src="{{ url_for('static', filename='firebase-config.js') }}?v=20260129"></script>
<script type="module" src="{{ url_for('static', filename='firebase-auth.js') }}?v=20260129"></script>
<script src="{{ url_for('static', filename='script.js') }}?v=20260129"></script>

</body>
</html>
